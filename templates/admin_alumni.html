{% extends "base.html" %}
{% block content %}
<ul class="nav nav-pills mb-3">
  <li class="nav-item"><a class="nav-link" href="/admin/events">Events</a></li>
  <li class="nav-item"><a class="nav-link" href="/admin/blogs">Blogs</a></li>
  <li class="nav-item"><a class="nav-link active" href="/admin/alumni">Alumni</a></li>
</ul>

<div class="card shadow-sm mb-3">
  <div class="card-body">
    <form class="d-flex gap-2 flex-wrap" method="get">
      <input class="form-control" name="q" value="{{ q }}" placeholder="Search name, email, year, branch, company">
      <select class="form-select" name="n" style="max-width:140px">
        <option value="25" {% if per_page==25 %}selected{% endif %}>Show 25</option>
        <option value="50" {% if per_page==50 %}selected{% endif %}>Show 50</option>
        <option value="100" {% if per_page==100 %}selected{% endif %}>Show 100</option>
      </select>
      <button class="btn btn-primary">Search</button>
    </form>
  </div>
</div>

<div class="card shadow-sm">
  <div class="card-body">
    <h5 class="card-title">Alumni Admin</h5>
    <div class="table-responsive">
      <table class="table table-dark table-striped align-middle">
        <thead>
          <tr><th>Name</th><th>College Email</th><th>Personal Email</th><th>Year</th><th>Branch</th><th>Company</th><th class="text-end">Actions</th></tr>
        </thead>
        <tbody>
          {% for a in rows %}
          <tr>
            <td>{{ a.full_name or '—' }}</td>
            <td class="small">{{ a.college_email }}</td>
            <td class="small">{{ a.personal_email }}</td>
            <td>{{ a.graduation_year or '—' }}</td>
            <td>{{ a.branch or '—' }}</td>
            <td>{{ a.company or '—' }}</td>
            <td class="text-end">
              <form method="post" action="{{ url_for('admin_alumni_delete', id=a.id) }}" class="d-inline">
                <button class="btn btn-sm btn-outline-danger">Delete</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <nav class="mt-3">
      <ul class="pagination justify-content-center">
        <li class="page-item {% if page<=1 %}disabled{% endif %}">
          <a class="page-link" href="{{ url_for('admin_alumni', q=q, n=per_page, page=page-1) }}">Prev</a>
        </li>
        {% for p in range(1, pages+1) %}
        <li class="page-item {% if p==page %}active{% endif %}">
          <a class="page-link" href="{{ url_for('admin_alumni', q=q, n=per_page, page=p) }}">{{ p }}</a>
        </li>
        {% endfor %}
        <li class="page-item {% if page>=pages %}disabled{% endif %}">
          <a class="page-link" href="{{ url_for('admin_alumni', q=q, n=per_page, page=page+1) }}">Next</a>
        </li>
      </ul>
      <div class="text-center text-secondary small">Total: {{ total }}</div>
    </nav>
  </div>
</div>
{% endblock %}
